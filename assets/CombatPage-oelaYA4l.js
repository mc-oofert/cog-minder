import{j as f,r as g,t as gt,B as Te,o as K,v as Kt,R as Ut,f as B,T as Gt,w as qt,x as Yt,d as Ze}from"./index-CxVjXAax.js";import{j as Zt}from"./items-bCTdCTgI.js";import{C as mt,B as Qt,a as Jt,p as ht,L as Xt,b as yt,c as vt,d as er,e as bt,f as I,g as xt,h as Ct,i as tr,A as rr,P as nr,j as or,k as ar,l as ir,m as sr}from"./chartColors-4DBA7NyD.js";import{j as Re}from"./bots-EPaA02tF.js";/* empty css              */function cr({children:e}){return f.jsx("div",{className:"chart-grid",children:e})}const se=new Map(Zt.map(e=>[e.Name,e]));function Qe(e){return se.get(e)!==void 0}function lr(e){return se.get(e)}function ne(e){const t=se.get(e);return t===void 0?(console.log(`Failed to find item ${e}`),"Unknown"):t["Damage Type"]===void 0?t["Explosion Type"]===void 0?(console.log(`Item ${e} didn't have any damage type`),"Unknown"):t["Explosion Type"]:t["Damage Type"]}function Je(e){const t=se.get(e);return e==="Core"?"Core":t===void 0?(console.log(`Failed to find item ${e}`),"Unknown"):(t.Slot===void 0&&console.log(`Item ${e} didn't have any slot`),t.Slot)}function Dt(){const[e,t]=g.useState({width:0,height:0});return g.useLayoutEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}mt.register(Qt,Jt,ht,Xt,yt,vt);function ur({chartTitle:e,values:t,barColors:r,maxValue:n,valuesArePercentages:o}){const a=Dt(),i=gt();return f.jsx(er,{data:fr(e,t,r),options:pr(e,n,i,a,o||!1),plugins:[bt]})}function fr(e,t,r){return{labels:t.map(n=>n.label),datasets:[{label:e,data:t.map(n=>n.value),backgroundColor:r,borderColor:r}]}}function pr(e,t,r,n,o){return{animation:{duration:300},color:I,indexAxis:"y",interaction:{axis:"y",intersect:!1},maintainAspectRatio:!1,plugins:{chartCanvasBackgroundColor:{color:r==="Cogmind"?xt:Ct},legend:{display:!1},tooltip:{callbacks:{label:a=>{if(o){const i=Number(a.formattedValue.replace(",","")).toFixed(1);return`${e}: ${i}%`}else{const i=Number(a.formattedValue.replace(",","")),s=a.chart.data.datasets[0].data.map(c=>Number(c)).reduce((c,d)=>c+d,0),p=(i*100/s).toFixed(1);return`${e}: ${i} (${p}%) `}}}},title:{color:I,font:{size:Math.min(20,n.width/22)},display:!0,text:e}},scales:{x:{border:{display:!1},grid:{color:tr},max:t,ticks:{color:I,precision:0,callback(a,i,s){return o?a+"%":a}}},y:{border:{display:!1},grid:{display:!1},ticks:{color:I}}}}}mt.register(rr,vt,ht,yt);function dr({chartTitle:e,values:t,backgroundColors:r,borderColors:n}){const o=Dt(),a=gt();return f.jsx(nr,{data:gr(e,t,r,n),options:mr(e,a,o),plugins:[bt]})}function gr(e,t,r,n){return{labels:t.map(o=>o.label),datasets:[{label:e,data:t.map(o=>o.value),backgroundColor:r,borderColor:n}]}}function mr(e,t,r){return{animation:{duration:300},color:I,maintainAspectRatio:!1,plugins:{chartCanvasBackgroundColor:{color:t==="Cogmind"?xt:Ct},title:{color:I,display:!0,font:{size:Math.min(20,r.width/22)},text:e},tooltip:{callbacks:{label:n=>{const o=Number(n.formattedValue),a=n.chart.data.datasets[0].data.map(s=>Number(s)).reduce((s,p)=>s+p,0),i=(o*100/a).toFixed(1);return`${e}: ${o} (${i}%) `}}}}}}function T({chartTitle:e,values:t,displayOptions:r,forceChartType:n,valuesArePercentages:o}){const[a,i]=g.useState(!1),[s,p]=g.useState(!0);let c=!1;t=[...t],t.sort((m,E)=>s?E.value-m.value:m.value-E.value);const d=t.length>10;if(!a&&d){const m=t.splice(0,10);o||(m.push({label:"Other",value:t.reduce((E,S)=>E+S.value,0)}),c=!0),t=m}return r.chartType==="Pie"&&n!=="Bar"?yr(e,t):hr(t,e,c,d,i,a,p,s,o||!1)}function hr(e,t,r,n,o,a,i,s,p){let c;r&&(!s||s&&e[10].value>1.2*e[0].value)&&(c=Math.floor(1.2*(s?e[0].value:e[9].value)));const d=f.jsx("div",{className:"horizontal-bar-chart-wrapper",style:{height:`${75+e.length*20}px`},children:f.jsx(ur,{chartTitle:t,values:e,barColors:r?or:ar,maxValue:c,valuesArePercentages:p})});let m;n&&(m=f.jsx(Te,{onClick:()=>o(k=>!k),className:"button-expand-collapse",tooltip:a?'Click to collapse back to top 10 values and "Other" category':'Click to expand "Other" category into all values',children:a?"▲ Collapse ▲":"▼ Show All ▼"}));const E=f.jsx(Te,{onClick:()=>i(k=>!k),className:"button-ascending-descending",tooltip:s?"Click to change sort order to descending":"Click to change sort order to ascending",children:s?"Sort ↓":"Sort ↑"});return f.jsxs("div",{className:"horizontal-bar-chart-container",children:[E,d,m]})}function yr(e,t){return f.jsx("div",{className:"pie-chart-container",children:f.jsx(dr,{chartTitle:e,values:t,borderColors:ir,backgroundColors:sr})})}function vr({combatLogEntries:e,displayOptions:t}){t={...t,chartType:"Bar"};const r=br(e,t);return f.jsx(T,{chartTitle:"Cogmind's Accuracy",values:r,displayOptions:t,valuesArePercentages:!0})}function br(e,t){switch(t.category){case"Bot":case"Class":case"Critical":case"Part":case"Slot":return[]}const r=new Map;for(const o of e){if(o.sourceEntity!=="Cogmind")continue;let a;switch(t.category){case"Damage Type":a=ne(o.sourceWeapon);break;case"Weapon":a=o.sourceWeapon;break;default:K(t.category)}let i=r.get(a);i===void 0&&(i={hits:0,total:0}),i.hits+=o.projectilesHit,i.total+=o.projectilesTotal,r.set(a,i)}const n=[];for(const[o,a]of r)n.push({label:o,value:a.hits/a.total*100});return n}const Et=new Map(Re.map(e=>[e.Name,e])),xr=new Map(Re.filter(e=>e["Short Name"]!==void 0).map(e=>[e["Short Name"],e])),Cr=new Map(Re.filter(e=>e["Ally Name"]!==void 0).map(e=>[e["Ally Name"],e]));function Dr(e){return Cr.get(e)}function De(e){return Et.get(e)}function Er(e){return xr.get(e)}function je(e){const t=Et.get(e);return t===void 0?(console.log(`Failed to find bot ${e}`),"Unknown"):t.Class}function wr(e,t,r,n){switch(n){case"Source":switch(r){case"Bot":return e.sourceEntity;case"Class":return je(e.sourceEntity);case"Critical":return t.criticalHitType||"None";case"Damage Type":return ne(e.sourceWeapon);case"Part":return t.damagedPart;case"Slot":return Je(t.damagedPart);case"Weapon":return e.sourceWeapon;default:K(r)}break;case"Target":switch(r){case"Bot":return t.damagedEntity;case"Class":return je(t.damagedEntity);case"Critical":return t.criticalHitType||"None";case"Damage Type":return ne(e.sourceWeapon);case"Part":return t.damagedPart;case"Slot":return Je(t.damagedPart);case"Weapon":return e.sourceWeapon;default:K(r);break}break;default:K(n)}return"Unknown"}function A(e,t,r,n){const o=new Map;for(const i of e)if(!(r.processCombatLogEntry!==void 0&&!r.processCombatLogEntry(i)))for(const s of i.damageEntries){if(r.processDamageEntry!==void 0&&!r.processDamageEntry(s))continue;const p=wr(i,s,t,n);let c=o.get(p);c===void 0&&(c=0),c+=r.getValue(i,s),o.set(p,c)}const a=[];for(const[i,s]of o)a.push({label:i,value:s});return a}function Tr({combatLogEntries:e,displayOptions:t}){const r=kr(e,t);return f.jsx(T,{chartTitle:"Cogmind's Parts Destroyed",values:r,displayOptions:t})}const jr={processDamageEntry:e=>e.damagedPart!=="Core"&&e.targetDestroyed===!0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>1};function kr(e,t){return A(e,t.category,jr,"Target")}function Ar({combatLogEntries:e,displayOptions:t}){const r=Pr(e,t);return f.jsx(T,{chartTitle:"Critical Hits by Cogmind",values:r,displayOptions:t})}const Sr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.criticalHitType!==void 0,getValue:(e,t)=>1};function Pr(e,t){return A(e,t.category,Sr,"Target")}function Fr({combatLogEntries:e,displayOptions:t}){const r=_r(e,t);return f.jsx(T,{chartTitle:"Critical Hits to Cogmind",values:r,displayOptions:t})}const Rr={processCombatLogEntry:e=>e.sourceEntity!=="Cogmind",processDamageEntry:e=>e.criticalHitType!==void 0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>1};function _r(e,t){return A(e,t.category,Rr,"Source")}function Or({combatLogEntries:e,displayOptions:t}){const r=Lr(e,t);return f.jsx(T,{chartTitle:"Damage Dealt",values:r,displayOptions:t})}const $r={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damageDealt!==void 0,getValue:(e,t)=>t.damageDealt};function Lr(e,t){return A(e,t.category,$r,"Target")}function Br({combatLogEntries:e,displayOptions:t}){const r=Nr(e,t);return f.jsx(T,{chartTitle:"Damage Received",values:r,displayOptions:t})}const Ir={processDamageEntry:e=>e.damageDealt!==void 0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>t.damageDealt};function Nr(e,t){return A(e,t.category,Ir,"Source")}function zr({combatLogEntries:e,displayOptions:t}){t={...t,chartType:"Bar"};const r=Mr(e,t);return f.jsx(T,{chartTitle:"Non-Cogmind Accuracy",values:r,displayOptions:t,valuesArePercentages:!0})}function Mr(e,t){switch(t.category){case"Critical":case"Part":case"Slot":return[]}const r=new Map;for(const o of e){if(o.sourceEntity==="Cogmind")continue;let a;switch(t.category){case"Bot":a=o.sourceEntity;break;case"Class":a=je(o.sourceEntity);break;case"Damage Type":a=ne(o.sourceWeapon);break;case"Weapon":a=o.sourceWeapon;break;default:K(t.category)}let i=r.get(a);i===void 0&&(i={hits:0,total:0}),i.hits+=o.projectilesHit,i.total+=o.projectilesTotal,r.set(a,i)}const n=[];for(const[o,a]of r)n.push({label:o,value:a.hits/a.total*100});return n}function Wr({combatLogEntries:e,displayOptions:t}){const r=Vr(e,t);return f.jsx(T,{chartTitle:"Overflow Damage Dealt",values:r,displayOptions:t})}const Hr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damageDealt!==void 0&&e.damageOverflow===!0,getValue:(e,t)=>t.damageDealt};function Vr(e,t){return A(e,t.category,Hr,"Target")}function Kr({combatLogEntries:e,displayOptions:t}){const r=Gr(e,t);return f.jsx(T,{chartTitle:"Overflow Damage Received",values:r,displayOptions:t})}const Ur={processDamageEntry:e=>e.damageDealt!==void 0&&e.damagedEntity==="Cogmind"&&e.damageOverflow===!0,getValue:(e,t)=>t.damageDealt};function Gr(e,t){return A(e,t.category,Ur,"Source")}function qr({combatLogEntries:e,displayOptions:t}){const r=Zr(e,t);return f.jsx(T,{chartTitle:"Parts Destroyed by Cogmind",values:r,displayOptions:t})}const Yr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damagedPart!=="Core"&&e.targetDestroyed===!0,getValue:(e,t)=>1};function Zr(e,t){return A(e,t.category,Yr,"Target")}function Qr({combatLogEntries:e,displayOptions:t}){const r=Xr(e,t);return f.jsx(T,{chartTitle:"Sneak Attacks by Cogmind",values:r,displayOptions:t})}const Jr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind"&&e.sneakAttack===!0,getValue:(e,t)=>1};function Xr(e,t){return A(e,t.category,Jr,"Target")}var wt={exports:{}},en="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tn=en,rn=tn;function Tt(){}function jt(){}jt.resetWarningCache=Tt;var nn=function(){function e(n,o,a,i,s,p){if(p!==rn){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:jt,resetWarningCache:Tt};return r.PropTypes=r,r};wt.exports=nn();var on=wt.exports;const h=Kt(on);function N(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(d){try{c(n.next(d))}catch(m){i(m)}}function p(d){try{c(n.throw(d))}catch(m){i(m)}}function c(d){d.done?a(d.value):o(d.value).then(s,p)}c((n=n.apply(e,t||[])).next())})}function z(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(d){return p([c,d])}}function p(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(r=0)),r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],o=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xe(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a}function et(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var an=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function G(e,t){var r=sn(e);if(typeof r.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function sn(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var n=t.split(".").pop().toLowerCase(),o=an.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var cn=[".DS_Store","Thumbs.db"];function ln(e){return N(this,void 0,void 0,function(){return z(this,function(t){return oe(e)&&un(e.dataTransfer)?[2,gn(e.dataTransfer,e.type)]:fn(e)?[2,pn(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,dn(e)]:[2,[]]})})}function un(e){return oe(e)}function fn(e){return oe(e)&&oe(e.target)}function oe(e){return typeof e=="object"&&e!==null}function pn(e){return ke(e.target.files).map(function(t){return G(t)})}function dn(e){return N(this,void 0,void 0,function(){var t;return z(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(n){return G(n)})]}})})}function gn(e,t){return N(this,void 0,void 0,function(){var r,n;return z(this,function(o){switch(o.label){case 0:return e.items?(r=ke(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(mn))]):[3,2];case 1:return n=o.sent(),[2,tt(kt(n))];case 2:return[2,tt(ke(e.files).map(function(a){return G(a)}))]}})})}function tt(e){return e.filter(function(t){return cn.indexOf(t.name)===-1})}function ke(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function mn(e){if(typeof e.webkitGetAsEntry!="function")return rt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?At(t):rt(e)}function kt(e){return e.reduce(function(t,r){return et(et([],Xe(t),!1),Xe(Array.isArray(r)?kt(r):[r]),!1)},[])}function rt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=G(t);return Promise.resolve(r)}function hn(e){return N(this,void 0,void 0,function(){return z(this,function(t){return[2,e.isDirectory?At(e):yn(e)]})})}function At(e){var t=e.createReader();return new Promise(function(r,n){var o=[];function a(){var i=this;t.readEntries(function(s){return N(i,void 0,void 0,function(){var p,c,d;return z(this,function(m){switch(m.label){case 0:if(s.length)return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return p=m.sent(),r(p),[3,4];case 3:return c=m.sent(),n(c),[3,4];case 4:return[3,6];case 5:d=Promise.all(s.map(hn)),o.push(d),a(),m.label=6;case 6:return[2]}})})},function(s){n(s)})}a()})}function yn(e){return N(this,void 0,void 0,function(){return z(this,function(t){return[2,new Promise(function(r,n){e.file(function(o){var a=G(o,e.fullPath);r(a)},function(o){n(o)})})]})})}var vn=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return r.some(function(i){var s=i.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?a===s.replace(/\/.*$/,""):o===s})}return!0};function nt(e){return Cn(e)||xn(e)||Pt(e)||bn()}function bn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cn(e){if(Array.isArray(e))return Ae(e)}function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ot(Object(r),!0).forEach(function(n){St(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function St(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return wn(e)||En(e,t)||Pt(e,t)||Dn()}function Dn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e,t){if(e){if(typeof e=="string")return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}}function Ae(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function En(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,a=!1,i,s;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));o=!0);}catch(p){a=!0,s=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function wn(e){if(Array.isArray(e))return e}var Tn="file-invalid-type",jn="file-too-large",kn="file-too-small",An="too-many-files",Sn=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Tn,message:"File type must be ".concat(r)}},it=function(t){return{code:jn,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},st=function(t){return{code:kn,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Pn={code:An,message:"Too many files"};function Ft(e,t){var r=e.type==="application/x-moz-file"||vn(e,t);return[r,r?null:Sn(t)]}function Rt(e,t,r){if(R(e.size))if(R(t)&&R(r)){if(e.size>r)return[!1,it(r)];if(e.size<t)return[!1,st(t)]}else{if(R(t)&&e.size<t)return[!1,st(t)];if(R(r)&&e.size>r)return[!1,it(r)]}return[!0,null]}function R(e){return e!=null}function Fn(e){var t=e.files,r=e.accept,n=e.minSize,o=e.maxSize,a=e.multiple,i=e.maxFiles,s=e.validator;return!a&&t.length>1||a&&i>=1&&t.length>i?!1:t.every(function(p){var c=Ft(p,r),d=U(c,1),m=d[0],E=Rt(p,n,o),S=U(E,1),k=S[0],M=s?s(p):null;return m&&k&&!M})}function ae(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function te(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ct(e){e.preventDefault()}function Rn(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function _n(e){return e.indexOf("Edge/")!==-1}function On(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Rn(e)||_n(e)}function j(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return t.some(function(s){return!ae(n)&&s&&s.apply(void 0,[n].concat(a)),ae(n)})}}function $n(){return"showOpenFilePicker"in window}function Ln(e){if(R(e)){var t=Object.entries(e).filter(function(r){var n=U(r,2),o=n[0],a=n[1],i=!0;return _t(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(a)||!a.every(Ot))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(r,n){var o=U(n,2),a=o[0],i=o[1];return at(at({},r),{},St({},a,i))},{});return[{description:"Files",accept:t}]}return e}function Bn(e){if(R(e))return Object.entries(e).reduce(function(t,r){var n=U(r,2),o=n[0],a=n[1];return[].concat(nt(t),[o],nt(a))},[]).filter(function(t){return _t(t)||Ot(t)}).join(",")}function In(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Nn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function _t(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ot(e){return/^.*\.[\w]+$/.test(e)}var zn=["children"],Mn=["open"],Wn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Hn=["refKey","onChange","onClick"];function Vn(e){return Gn(e)||Un(e)||$t(e)||Kn()}function Kn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Un(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gn(e){if(Array.isArray(e))return Se(e)}function Ee(e,t){return Zn(e)||Yn(e,t)||$t(e,t)||qn()}function qn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){if(e){if(typeof e=="string")return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}}function Se(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yn(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,a=!1,i,s;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));o=!0);}catch(p){a=!0,s=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function Zn(e){if(Array.isArray(e))return e}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(r),!0).forEach(function(n){Pe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){if(e==null)return{};var r=Qn(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qn(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var _e=g.forwardRef(function(e,t){var r=e.children,n=ie(e,zn),o=Bt(n),a=o.open,i=ie(o,Mn);return g.useImperativeHandle(t,function(){return{open:a}},[a]),Ut.createElement(g.Fragment,null,r(y(y({},i),{},{open:a})))});_e.displayName="Dropzone";var Lt={disabled:!1,getFilesFromEvent:ln,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};_e.defaultProps=Lt;_e.propTypes={children:h.func,accept:h.objectOf(h.arrayOf(h.string)),multiple:h.bool,preventDropOnDocument:h.bool,noClick:h.bool,noKeyboard:h.bool,noDrag:h.bool,noDragEventsBubbling:h.bool,minSize:h.number,maxSize:h.number,maxFiles:h.number,disabled:h.bool,getFilesFromEvent:h.func,onFileDialogCancel:h.func,onFileDialogOpen:h.func,useFsAccessApi:h.bool,autoFocus:h.bool,onDragEnter:h.func,onDragLeave:h.func,onDragOver:h.func,onDrop:h.func,onDropAccepted:h.func,onDropRejected:h.func,onError:h.func,validator:h.func};var Fe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Bt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=y(y({},Lt),e),r=t.accept,n=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,i=t.minSize,s=t.multiple,p=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,m=t.onDragOver,E=t.onDrop,S=t.onDropAccepted,k=t.onDropRejected,M=t.onFileDialogCancel,ce=t.onFileDialogOpen,Oe=t.useFsAccessApi,$e=t.autoFocus,le=t.preventDropOnDocument,Le=t.noClick,ue=t.noKeyboard,Be=t.noDrag,P=t.noDragEventsBubbling,fe=t.onError,W=t.validator,H=g.useMemo(function(){return Bn(r)},[r]),Ie=g.useMemo(function(){return Ln(r)},[r]),pe=g.useMemo(function(){return typeof ce=="function"?ce:ut},[ce]),q=g.useMemo(function(){return typeof M=="function"?M:ut},[M]),x=g.useRef(null),w=g.useRef(null),Nt=g.useReducer(Jn,Fe),Ne=Ee(Nt,2),de=Ne[0],C=Ne[1],zt=de.isFocused,ze=de.isFileDialogActive,Y=g.useRef(typeof window<"u"&&window.isSecureContext&&Oe&&$n()),Me=function(){!Y.current&&ze&&setTimeout(function(){if(w.current){var u=w.current.files;u.length||(C({type:"closeDialog"}),q())}},300)};g.useEffect(function(){return window.addEventListener("focus",Me,!1),function(){window.removeEventListener("focus",Me,!1)}},[w,ze,q,Y]);var _=g.useRef([]),We=function(u){x.current&&x.current.contains(u.target)||(u.preventDefault(),_.current=[])};g.useEffect(function(){return le&&(document.addEventListener("dragover",ct,!1),document.addEventListener("drop",We,!1)),function(){le&&(document.removeEventListener("dragover",ct),document.removeEventListener("drop",We))}},[x,le]),g.useEffect(function(){return!n&&$e&&x.current&&x.current.focus(),function(){}},[x,$e,n]);var F=g.useCallback(function(l){fe?fe(l):console.error(l)},[fe]),He=g.useCallback(function(l){l.preventDefault(),l.persist(),X(l),_.current=[].concat(Vn(_.current),[l.target]),te(l)&&Promise.resolve(o(l)).then(function(u){if(!(ae(l)&&!P)){var v=u.length,b=v>0&&Fn({files:u,accept:H,minSize:i,maxSize:a,multiple:s,maxFiles:p,validator:W}),D=v>0&&!b;C({isDragAccept:b,isDragReject:D,isDragActive:!0,type:"setDraggedFiles"}),c&&c(l)}}).catch(function(u){return F(u)})},[o,c,F,P,H,i,a,s,p,W]),Ve=g.useCallback(function(l){l.preventDefault(),l.persist(),X(l);var u=te(l);if(u&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return u&&m&&m(l),!1},[m,P]),Ke=g.useCallback(function(l){l.preventDefault(),l.persist(),X(l);var u=_.current.filter(function(b){return x.current&&x.current.contains(b)}),v=u.indexOf(l.target);v!==-1&&u.splice(v,1),_.current=u,!(u.length>0)&&(C({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),te(l)&&d&&d(l))},[x,d,P]),Z=g.useCallback(function(l,u){var v=[],b=[];l.forEach(function(D){var V=Ft(D,H),L=Ee(V,2),me=L[0],he=L[1],ye=Rt(D,i,a),ee=Ee(ye,2),ve=ee[0],be=ee[1],xe=W?W(D):null;if(me&&ve&&!xe)v.push(D);else{var Ce=[he,be];xe&&(Ce=Ce.concat(xe)),b.push({file:D,errors:Ce.filter(function(Vt){return Vt})})}}),(!s&&v.length>1||s&&p>=1&&v.length>p)&&(v.forEach(function(D){b.push({file:D,errors:[Pn]})}),v.splice(0)),C({acceptedFiles:v,fileRejections:b,type:"setFiles"}),E&&E(v,b,u),b.length>0&&k&&k(b,u),v.length>0&&S&&S(v,u)},[C,s,H,i,a,p,E,S,k,W]),Q=g.useCallback(function(l){l.preventDefault(),l.persist(),X(l),_.current=[],te(l)&&Promise.resolve(o(l)).then(function(u){ae(l)&&!P||Z(u,l)}).catch(function(u){return F(u)}),C({type:"reset"})},[o,Z,F,P]),O=g.useCallback(function(){if(Y.current){C({type:"openDialog"}),pe();var l={multiple:s,types:Ie};window.showOpenFilePicker(l).then(function(u){return o(u)}).then(function(u){Z(u,null),C({type:"closeDialog"})}).catch(function(u){In(u)?(q(u),C({type:"closeDialog"})):Nn(u)?(Y.current=!1,w.current?(w.current.value=null,w.current.click()):F(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):F(u)});return}w.current&&(C({type:"openDialog"}),pe(),w.current.value=null,w.current.click())},[C,pe,q,Oe,Z,F,Ie,s]),Ue=g.useCallback(function(l){!x.current||!x.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),O())},[x,O]),Ge=g.useCallback(function(){C({type:"focus"})},[]),qe=g.useCallback(function(){C({type:"blur"})},[]),Ye=g.useCallback(function(){Le||(On()?setTimeout(O,0):O())},[Le,O]),$=function(u){return n?null:u},ge=function(u){return ue?null:$(u)},J=function(u){return Be?null:$(u)},X=function(u){P&&u.stopPropagation()},Mt=g.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.refKey,v=u===void 0?"ref":u,b=l.role,D=l.onKeyDown,V=l.onFocus,L=l.onBlur,me=l.onClick,he=l.onDragEnter,ye=l.onDragOver,ee=l.onDragLeave,ve=l.onDrop,be=ie(l,Wn);return y(y(Pe({onKeyDown:ge(j(D,Ue)),onFocus:ge(j(V,Ge)),onBlur:ge(j(L,qe)),onClick:$(j(me,Ye)),onDragEnter:J(j(he,He)),onDragOver:J(j(ye,Ve)),onDragLeave:J(j(ee,Ke)),onDrop:J(j(ve,Q)),role:typeof b=="string"&&b!==""?b:"presentation"},v,x),!n&&!ue?{tabIndex:0}:{}),be)}},[x,Ue,Ge,qe,Ye,He,Ve,Ke,Q,ue,Be,n]),Wt=g.useCallback(function(l){l.stopPropagation()},[]),Ht=g.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.refKey,v=u===void 0?"ref":u,b=l.onChange,D=l.onClick,V=ie(l,Hn),L=Pe({accept:H,multiple:s,type:"file",style:{display:"none"},onChange:$(j(b,Q)),onClick:$(j(D,Wt)),tabIndex:-1},v,w);return y(y({},L),V)}},[w,r,s,Q,n]);return y(y({},de),{},{isFocused:zt&&!n,getRootProps:Mt,getInputProps:Ht,rootRef:x,inputRef:w,open:$(O)})}function Jn(e,t){switch(t.type){case"focus":return y(y({},e),{},{isFocused:!0});case"blur":return y(y({},e),{},{isFocused:!1});case"openDialog":return y(y({},Fe),{},{isFileDialogActive:!0});case"closeDialog":return y(y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return y(y({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return y(y({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return y({},Fe);default:return e}}function ut(){}const Xn=/^(\w*) .*$/,eo=/^Base Hit%: .*$/,to=/^(?:.*) (?:hacks|fails to hack) (?:.*)$/,ro=/^(?:.*) repels hacking attempt$/,no=/^(.*) (?:blasted off|knocked off|severed)$/,oo=/^(?:.*) system corrupted$/,ao=/^(.*) destroyed$/,ft=/^(.*) melted|(.*) instant meltdown$/,io=/^Suffered critical hit: Meltdown \(\+(?:.*)\)$/,so=/^(.*) (overflow dmg|damaged): (\d*)(?: \(Crit: (.*)\))?$/,co=/^Damage insufficient to overcome (?:.*)$/,lo=/^(?:.*) disabled \(Disruption\)$/,uo=/^(.*) detonated$/,fo=/^Gunslinging -> (?:.*)$/,po=/^(\d*)_( *)(.*?)(?: <x(\d*|\*)>)?$/,go=/^(?:.*) (?:breached|damaged|disabled)$/,mo=/^(.*) explodes$/,ho=/^(?:.* penetrates .*)|(?:Penetrated by .*)$/,yo=/^(?:.*) prevented critical effect$/,vo=/^(.*) destroyed(?: \(Crit: (.*)\))?$/,bo=/^(?:.*) short circuited$/,xo=/^(?:.*) triggered(?: by (?:.*))?$/,Co=/^\?\?\?$/,Do=/^(?:([^:]*): )?(.*?) (sneak attack )?\((?:[^=)]*=)?(\d+)%\) (?:(\d*)\/(\d*) )?(\w*)$/,Eo=/^\w{2}-\w{3}\((\w)\)$/,wo=new Map([["T","Borebot"],["Y","Bouncer"],["l","Butcher (5)"],["k","Decomposer"],["q","Demented"],["D","Dragon"],["i","Fireman (5)"],["F","Furnace"],["h","Guerrilla (5)"],["H","Hydra"],["x","Infiltrator (6)"],["K","Knight"],["B","Marauder (6)"],["d","Martyr (5)"],["M","Mutant (5)"],["r","Packrat"],["S","Samaritan"],["b","Savage (5)"],["m","Surgeon (4)"],["f","Thief"],["g","Thug (5)"],["c","Tinkerer"],["L","Troll"],["s","Wasp (5)"],["p","Wizard (5)"],["A","Z-Courier"],["Z","Z-Heavy (5)"],["o","Z-Technician"],["z","Zionite"]]),To=[{name:"Assembled (4)",regex:/^as-\d+$/},{name:"Assembler",regex:/^AS-\d+$/},{name:"Golem",regex:/^AG-\d+$/},{name:"Q-Series",regex:/^Q\d{3}-\w$/},{name:"Z-Experimental (8)",regex:/^Z-Ex$/}];class jo{constructor(t){this.ignoredRegexes=[eo,oo,to,ro,ft,io,no,co,lo,fo,go,ho,yo,bo,xo],this.currentEntry=pt(),this.lines=t,this.lineIndex=0,this.entries=[]}parseAllLogEntries(){let t;for(;(t=this.getNextLine())&&t!==null;)this.parseLogEntry(t)}getNextLine(){const t=this.peekNextLine();return t!==null&&(this.lineIndex+=1),t}parseDamageEntry(t){const r=so.exec(t.remainingText);if(r===null)return!1;const n=r[1],o=B(r[3],0),a=r[2]==="overflow dmg",i=r[4]??void 0,s=re();if(dt(n))return!0;if(Qe(n)||n.toLowerCase()==="core")s.damagedEntity="Cogmind",s.damagedPart=n.toLowerCase()==="core"?"Core":n;else{const{botName:c,partName:d}=we(n);s.damagedEntity=c,s.damagedPart=d}s.damageOverflow=a,s.damageDealt=o,s.criticalHitType=i,this.currentEntry.damageEntries.push(s);const p=this.peekNextLine();if(p!==null&&p.indent>=t.indent){const c=ao.exec(p.remainingText),d=ft.exec(p.remainingText);if(c!==null||d!==null)if(s.damagedPart==="Core")this.getNextLine(),s.targetDestroyed=!0;else if(d!==null){this.getNextLine();const m=re();m.damagedEntity=s.damagedEntity,m.damagedPart="Core",m.targetDestroyed=!0,this.currentEntry.damageEntries.push(m)}else this.parseDestroyedTarget(this.getNextLine())}return!0}parseDestroyedTarget(t){const r=vo.exec(t.remainingText);if(r===null)return!1;const n=r[1],o=r[2],a=re();if(dt(n))return!0;let i,s;return Qe(n)?(i="Cogmind",s=n):{botName:i,partName:s}=we(n),a.damagedEntity=i,a.damagedPart=s,a.criticalHitType=o,a.targetDestroyed=!0,this.currentEntry.damageEntries.push(a),!0}parseEngineDetonated(t){const r=uo.exec(t.remainingText);if(r===null)return!1;const{botName:n,partName:o}=we(r[1]),a=re();return a.damagedEntity=n,a.damagedPart=o,a.targetDestroyed=!0,this.currentEntry.damageEntries.push(a),!0}parseIgnoredLine(t){for(const r of this.ignoredRegexes)if(r.exec(t.remainingText)!==null)return!0;return!1}parseLogEntry(t){this.currentEntry=pt();const r=this.currentEntry;if(r.turn=t.turn,!this.parseWeaponAttack(t)&&!this.parseMachineExplosion(t)){if(this.parseDamageEntry(t)||this.parseDestroyedTarget(t)){r.projectilesHit=1,r.projectilesTotal=1,this.entries.push(r);return}this.parseIgnoredLine(t)||t.remainingText.length>0&&console.log(`Skipped non-recognized text ${t.remainingText}`)}}parseMachineExplosion(t){const r=mo.exec(t.remainingText);if(r===null)return!1;const n=this.currentEntry;return n.sourceEntity=r[1],n.sourceWeapon="Explosion",this.parseNestedLines(t),this.entries.push(n),!0}parseNestedLines(t){let r;for(;(r=this.peekNextLine())&&r!==null&&r.indent>t.indent;){const n=this.getNextLine();if(!this.parseDamageEntry(n)){if(this.parseDestroyedTarget(n))continue;if(this.parseEngineDetonated(n))continue;if(this.parseMachineExplosion(n))continue;if(this.parseWeaponAttack(n))continue;if(this.parseIgnoredLine(n))continue;console.log(`Skipped non-recognized nested text ${n.remainingText}`)}}}parseWeaponAttack(t){const r=this.currentEntry,n=Do.exec(t.remainingText);if(n===null){if(Co.exec(t.remainingText)===null)return!1;r.sourceEntity="Unknown",r.sourceWeapon="Unknown",r.projectilesHit=1,r.projectilesTotal=1}else{if(n[1]!==void 0){const o=It(n[1]);r.sourceEntity=o===void 0?"Unknown":o.Name}else r.sourceEntity="Cogmind";r.sourceWeapon=n[2],n[3]!==void 0&&(r.sneakAttack=!0),r.weaponAccuracy=B(n[4],0),n[5]!==void 0&&n[6]!==void 0?(r.projectilesHit=B(n[5],0),r.projectilesTotal=B(n[6],0)):(r.projectilesHit=n[7]==="Hit"?1:0,r.projectilesTotal=1)}return this.parseNestedLines(t),this.entries.push(r),!0}peekNextLine(){return this.lineIndex<this.lines.length?this.lines[this.lineIndex]:null}}function re(){return{damagedEntity:"",damagedPart:"",criticalHitType:void 0,damageDealt:void 0,damageOverflow:!1,targetDestroyed:!1}}function pt(){return{damageEntries:[],projectilesHit:0,projectilesTotal:0,sourceEntity:"Unknown",sourceWeapon:"Unknown",weaponAccuracy:void 0,sneakAttack:!1,turn:0}}const ko=new Set(["Door","Earth","Reinforced Barrier","Wall"]);function dt(e){return e.endsWith("Trap")?!0:ko.has(e)}function Ao(e){const t=[];for(let n of e.split(`
`)){n=n.trim();const o=po.exec(n);if(o===null){if(t.length>0&&n.length>0){t[t.length-1].remainingText+=" "+n;continue}n.length>0&&!n.includes("Cogmind Combat Log")&&console.log(`Failed to parse log line ${n}`);continue}const a=B(o[1],0),i=o[2].length,s=o[3],p=o[4]===void 0?1:B(o[4],1);for(let c=0;c<p;c++)t.push({indent:i,remainingText:s,turn:a})}const r=new jo(t);return r.parseAllLogEntries(),r.entries}function we(e){const t=e.split(" ");for(let r=1;r<t.length+1;r++){const n=It(t.slice(0,r).join(" "));if(n!==void 0){let o=t.slice(r).join(" ");return(o==="core"||o==="")&&(o="Core"),{botName:n.Name,partName:o}}}for(let r=1;r<t.length;r++){let n=t.slice(r).join(" ");if(lr(n)!==void 0||n==="core"||n==="Core"){const a=t.slice(0,r).join(" ");return n==="core"&&(n="Core"),{botName:a,partName:n}}}return console.log(`Failed to split bot and part ${e}`),{botName:"Unknown",partName:"Unknown"}}function It(e){let t=Er(e);if(t!==void 0||(t=De(e),t!==void 0))return t;const r=Xn.exec(e);if(r!==null&&(t=Dr(r[1]),t!==void 0))return t;const n=Eo.exec(e);if(n!==null){const o=wo.get(n[1]);if(o===void 0){console.log(`Unexpected derelict class ${n[1]}`);return}else return t=De(o),t===void 0&&console.log(`Bad derelict name ${o}`),t}for(const o of To)if(o.regex.exec(e)!==null)return t=De(o.name),t===void 0&&console.log(`Bad special bot name ${o.name}`),t}function So({onParse:e}){const t=g.useCallback(s=>{s.forEach(p=>{const c=new FileReader;c.onload=()=>{const d=c.result;e(d===null?[]:Ao(d))},c.readAsText(p)})},[]),{getRootProps:r,getInputProps:n,open:o,isDragActive:a}=Bt({noClick:!0,onDrop:t}),i=`dropzone-container${a?" dropzone-container-drag-active":""}`;return f.jsxs("div",{className:i,...r(),children:[f.jsx("input",{...n()}),f.jsx("span",{children:"Drag file or browse to upload combat log"}),f.jsx(Gt,{tooltipText:"Browse for combat log files.",children:f.jsx("div",{children:f.jsx(Te,{onClick:o,children:"Browse for file"})})}),f.jsx(qt,{tooltipText:"Combat logs can be exported in Beta 13 by setting `combatLogOutput=1` in the advanced settings. The standard Cogmind Options menu setting `Log Output` must also be set to `Text`. Advanced settings and combat logs are both located in your standard Cogmind install location. For Steam users, this is typically C:/Program Files (x86)/Steam/steamapps/common/Cogmind/",children:"Help"})]})}const Po=[{label:"Pie",value:"Pie",tooltip:"Sets charts to display as pie charts. Only the top 10 categories are shown in a pie chart."},{label:"Bar",value:"Bar",tooltip:'Sets charts to display as horizontal bar charts. Only the top 10 categories are shown by default, but an "Other" category can be expanded to show the full list of options.'}],Fo=[{label:"Bot",value:"Bot",tooltip:"Groups chart values based on damage dealt to individual bot types."},{label:"Class",value:"Class",tooltip:"Groups chart values based on damage dealt to bot class types."},{label:"Critical",value:"Critical",tooltip:"Groups chart values based on critical hit type (or None)."},{label:"Damage Type",value:"Damage Type",tooltip:"Groups chart values based on the damage type of the weapon used."},{label:"Damaged Part",value:"Part",tooltip:"Groups chart values based on the damaged part."},{label:"Damaged Slot",value:"Slot",tooltip:"Groups chart values based on the damaged slot. Core is considered its own slot."},{label:"Used Weapon",value:"Weapon",tooltip:"Groups chart values based on the weapon used."}];function Ro(e,t){return f.jsxs(cr,{children:[f.jsx(Or,{combatLogEntries:e,displayOptions:t}),f.jsx(Br,{combatLogEntries:e,displayOptions:t}),f.jsx(Wr,{combatLogEntries:e,displayOptions:t}),f.jsx(Kr,{combatLogEntries:e,displayOptions:t}),f.jsx(qr,{combatLogEntries:e,displayOptions:t}),f.jsx(Tr,{combatLogEntries:e,displayOptions:t}),f.jsx(Ar,{combatLogEntries:e,displayOptions:t}),f.jsx(Fr,{combatLogEntries:e,displayOptions:t}),f.jsx(vr,{combatLogEntries:e,displayOptions:t}),f.jsx(zr,{combatLogEntries:e,displayOptions:t}),f.jsx(Qr,{combatLogEntries:e,displayOptions:t})]})}function Io(){const r=[],[n,o]=Yt(),[a,i]=g.useState(!1),[s,p]=g.useState(r),c=a?Ro(s,n):null;return f.jsxs("div",{className:"page-content",children:[f.jsx(So,{onParse:d=>{p(d),i(!0)}}),!1,a&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"page-input-group",children:[f.jsx(Ze,{label:"Chart Type",tooltip:"Sets the display type of all charts.",flexGrowButtonCount:!0,buttons:Po,selected:n.chartType,onValueChanged:d=>{const m={...n,chartType:d};o(m)}}),f.jsx(Ze,{label:"Chart Category",tooltip:"Sets the category type for all charts. This determines how the combat log is split into pieces.",flexGrowButtonCount:!0,buttons:Fo,selected:n.category,onValueChanged:d=>{const m={...n,category:d};o(m)}})]}),c]})]})}export{Io as default};
